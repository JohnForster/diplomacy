{"version":3,"sources":["webpack:///./src/client/app/components/formBox/formBox.tsx","webpack:///./src/client/app/components/formBox/formBox.scss?4c05","webpack:///./src/client/app/components/formBox/formBox.scss","webpack:///./src/client/app/pages/login/login.scss?c1b8","webpack:///./src/client/app/pages/login/login.scss","webpack:///./src/client/app/pages/login/login.tsx"],"names":["FormBox","_super","__extends","prototype","render","Object","preact__WEBPACK_IMPORTED_MODULE_0__","className","this","props","children","content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","Login","_this","apply","arguments","state","formFields","login","evt","__awaiter","preventDefault","console","log","await_to_js__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_2___default","a","post","_a","_b","sent","err","res","data","toggleLogIn","preact_router__WEBPACK_IMPORTED_MODULE_4__","handleChange","field","event","lodash_clone__WEBPACK_IMPORTED_MODULE_3___default","target","value","setState","componentDidMount","username","usernameInput","password","passwordInput","_components_formBox_formBox__WEBPACK_IMPORTED_MODULE_6__","action","method","onSubmit","ref","type","name","onChange","href"],"mappings":"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","file":"3.bundle.js","sourcesContent":["import { Component, h } from 'preact'\n\nimport './formBox.scss'\n\nexport default class FormBox extends Component {\n  render() {\n    return (\n      <div className=\"formBox\">\n        {this.props.children}\n      </div>\n    )\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/lib/loader.js!./formBox.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/lib/loader.js!./formBox.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/lib/loader.js!./formBox.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Notable|Arvo&display=swap);\", \"\"]);\n// Module\nexports.push([module.id, \".formBox {\\n  font-family: 'Notable', 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\\n  text-align: center;\\n  font-size: 16px;\\n  border-radius: 20px;\\n  padding: 24px;\\n  background-color: #4972AB;\\n  color: #EFEFEF;\\n  letter-spacing: 2px;\\n  box-shadow: 5px 5px 0px #102542;\\n  margin: auto; }\\n  .formBox input[type=submit] {\\n    width: 50%;\\n    font-size: 12px;\\n    font-family: 'Notable', 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\\n    letter-spacing: 1px; }\\n\\na {\\n  color: #EFEFEF; }\\n\", \"\"]);\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/lib/loader.js!./login.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/lib/loader.js!./login.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/lib/loader.js!./login.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"h1 {\\n  color: #102542;\\n  font-size: 84px;\\n  text-shadow: 5px 5px 0px #546A7B;\\n  text-align: center; }\\n\", \"\"]);\n","import {Component, h} from 'preact'\n\nimport to from 'await-to-js'\nimport axios from 'axios'\nimport clone from 'lodash.clone'\n\nimport { Link, route } from 'preact-router'\nimport './login.scss'\n\nimport FormBox from '../../components/formBox/formBox';\n\nexport interface ILoginProps {\n  toggleLogIn: (arg: boolean) => void\n}\n\ninterface ILoginState {\n  formFields?: {\n    username?: string,\n    password?: string,\n  }\n}\n\nexport default class Login extends Component <ILoginProps, ILoginState> {\n  state: ILoginState = { formFields: {} }\n  usernameInput: HTMLInputElement\n  passwordInput: HTMLInputElement\n\n  componentDidMount () {\n    this.setState({\n      formFields: {\n        username: this.usernameInput.value,\n        password: this.passwordInput.value,\n      }\n    })\n  }\n\n  render(props: ILoginProps, state: ILoginState) {\n    return (\n      <div className='page'>\n        <h1>Diplomacy</h1><br/>\n        <FormBox>\n            {/* <button onClick={() => {route('/game', true)}}> Game </button> */}\n            <form action='api/user/authenticate' method='post' onSubmit={this.login}>\n              Username<br/>\n              <input ref={usernameInput => this.usernameInput = usernameInput} type='text' name='username' onChange={this.handleChange('username')}/><br/>\n              Password<br/>\n              <input ref={passwordInput => this.passwordInput = passwordInput} type='text' name='password' onChange={this.handleChange('password')}/><br/>\n              <input type='submit' value='Submit'/>\n            </form>\n            {'New? Register '}\n          <Link href='/register'>here</Link>\n        </FormBox>\n      </div>\n    )\n  }\n\n  login = async (evt: Event) => {\n    evt.preventDefault()\n    console.log('attempting to log in')\n    console.log(this.state.formFields)\n    const [err, res] = await to(axios.post('api/login', this.state.formFields))\n    if (err) {\n      console.log('logging an err')\n      console.log(err)\n    }\n    if (res) {\n      console.log('success!')\n      console.log(res.data)\n      await this.props.toggleLogIn(true)\n      route('/game')\n    }\n  }\n\n  handleChange = (field: 'username' | 'password') => {\n    return (event: Event) => {\n      const formFields = clone(this.state.formFields)\n      formFields[field] = (event.target as HTMLInputElement).value\n      this.setState({formFields})\n    }\n  }\n}\n"],"sourceRoot":""}