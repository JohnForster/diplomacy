{"version":3,"sources":["webpack:///./src/client/app/components/formBox/formBox.tsx","webpack:///./src/client/app/components/formBox/formBox.scss?1822","webpack:///./src/client/app/components/formBox/formBox.scss","webpack:///./src/client/app/pages/login/login.scss?ecb7","webpack:///./src/client/app/pages/login/login.scss","webpack:///./src/client/app/pages/login/login.tsx"],"names":["render","className","this","props","children","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","state","formFields","login","evt","preventDefault","console","log","a","post","err","res","data","toggleLogIn","handleChange","field","event","target","value","setState","componentDidMount","username","usernameInput","password","passwordInput","action","method","onSubmit","ref","type","name","onChange","href"],"mappings":"gaAIA,2B,+CAQA,OARqC,OACnC,YAAAA,OAAA,WACE,OACE,WADK,CACL,OAAKC,UAAU,WACZC,KAAKC,MAAMC,WAIpB,EARA,CAAqC,K,0BCJrC,IAAIC,EAAM,EAAQ,GACFC,EAAU,EAAQ,IAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,oBClBjBE,EADkC,EAAQ,EAChCC,EAA4B,IAC9BC,KAAK,CAACP,EAAOC,EAAI,oFAEzBI,EAAQE,KAAK,CAACP,EAAOC,EAAI,4bAA6b,KAEtdD,EAAOK,QAAUA,G,mBCPjB,IAAIT,EAAM,EAAQ,GACFC,EAAU,EAAQ,IAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,oBClBjBE,EADkC,EAAQ,EAChCC,EAA4B,IAE9BC,KAAK,CAACP,EAAOC,EAAI,uFAAwF,KAEjHD,EAAOK,QAAUA,G,ovDCgBjB,yE,OACE,EAAAG,MAAqB,CAAEC,WAAY,IAiCnC,EAAAC,MAAQ,SAAOC,GAAU,qC,4DAIJ,OAHnBA,EAAIC,iBACJC,QAAQC,IAAI,wBACZD,QAAQC,IAAIrB,KAAKe,MAAMC,YACJ,GAAM,YAAG,EAAAM,EAAMC,KAAK,YAAavB,KAAKe,MAAMC,c,cAAzD,EAAa,SAAZQ,EAAG,KAAEC,EAAG,KACXD,IACFJ,QAAQC,IAAI,kBACZD,QAAQC,IAAIG,IAEVC,GACFL,QAAQC,IAAI,YACZD,QAAQC,IAAII,EAAIC,MAChB,GAAM1B,KAAKC,MAAM0B,aAAY,KAH3B,M,OAGF,SACA,YAAM,S,mCAIV,EAAAC,aAAe,SAACC,GACd,OAAO,SAACC,GACN,IAAMd,EAAa,IAAM,EAAKD,MAAMC,YACpCA,EAAWa,GAAUC,EAAMC,OAA4BC,MACvD,EAAKC,SAAS,CAACjB,WAAU,M,EAG/B,OA1DmC,OAKjC,YAAAkB,kBAAA,WACElC,KAAKiC,SAAS,CACZjB,WAAY,CACVmB,SAAUnC,KAAKoC,cAAcJ,MAC7BK,SAAUrC,KAAKsC,cAAcN,UAKnC,YAAAlC,OAAA,SAAOG,EAAoBc,GAA3B,WACE,OACE,WADK,CACL,OAAKhB,UAAU,QACb,mCAAkB,uBAClB,YAAC,IAAO,KAEJ,oBAAMwC,OAAO,wBAAwBC,OAAO,OAAOC,SAAUzC,KAAKiB,O,WACxD,uBACR,qBAAOyB,IAAK,SAAAN,GAAiB,SAAKA,cAAgBA,GAAeO,KAAK,OAAOC,KAAK,WAAWC,SAAU7C,KAAK4B,aAAa,cAAc,uB,WAC/H,uBACR,qBAAOc,IAAK,SAAAJ,GAAiB,SAAKA,cAAgBA,GAAeK,KAAK,OAAOC,KAAK,WAAWC,SAAU7C,KAAK4B,aAAa,cAAc,uBACvI,qBAAOe,KAAK,SAASX,MAAM,YAE5B,iBACH,YAAC,IAAI,CAACc,KAAK,aAAW,WA8BhC,EA1DA,CAAmC,K","file":"3.bundle.js","sourcesContent":["import { Component, h } from 'preact'\n\nimport './formBox.scss'\n\nexport default class FormBox extends Component {\n  render() {\n    return (\n      <div className=\"formBox\">\n        {this.props.children}\n      </div>\n    )\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js!./formBox.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Notable|Arvo&display=swap);\"]);\n// Module\nexports.push([module.id, \".formBox{font-family:'Notable', 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;text-align:center;font-size:16px;border-radius:20px;padding:24px;background-color:#4972AB;color:#EFEFEF;letter-spacing:2px;box-shadow:5px 5px 0px #102542;margin:auto}.formBox input[type=submit]{width:50%;font-size:12px;font-family:'Notable', 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;letter-spacing:1px}a{color:#EFEFEF}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js!./login.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"h1{color:#102542;font-size:84px;text-shadow:5px 5px 0px #546A7B;text-align:center}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import {Component, h} from 'preact'\n\nimport to from 'await-to-js'\nimport axios from 'axios'\nimport clone from 'lodash.clone'\n\nimport { Link, route } from 'preact-router'\nimport './login.scss'\n\nimport FormBox from '../../components/formBox/formBox';\n\nexport interface ILoginProps {\n  toggleLogIn: (arg: boolean) => void\n}\n\ninterface ILoginState {\n  formFields?: {\n    username?: string,\n    password?: string,\n  }\n}\n\nexport default class Login extends Component <ILoginProps, ILoginState> {\n  state: ILoginState = { formFields: {} }\n  usernameInput: HTMLInputElement\n  passwordInput: HTMLInputElement\n\n  componentDidMount () {\n    this.setState({\n      formFields: {\n        username: this.usernameInput.value,\n        password: this.passwordInput.value,\n      }\n    })\n  }\n\n  render(props: ILoginProps, state: ILoginState) {\n    return (\n      <div className='page'>\n        <h1>Diplomacy</h1><br/>\n        <FormBox>\n            {/* <button onClick={() => {route('/game', true)}}> Game </button> */}\n            <form action='api/user/authenticate' method='post' onSubmit={this.login}>\n              Username<br/>\n              <input ref={usernameInput => this.usernameInput = usernameInput} type='text' name='username' onChange={this.handleChange('username')}/><br/>\n              Password<br/>\n              <input ref={passwordInput => this.passwordInput = passwordInput} type='text' name='password' onChange={this.handleChange('password')}/><br/>\n              <input type='submit' value='Submit'/>\n            </form>\n            {'New? Register '}\n          <Link href='/register'>here</Link>\n        </FormBox>\n      </div>\n    )\n  }\n\n  login = async (evt: Event) => {\n    evt.preventDefault()\n    console.log('attempting to log in')\n    console.log(this.state.formFields)\n    const [err, res] = await to(axios.post('api/login', this.state.formFields))\n    if (err) {\n      console.log('logging an err')\n      console.log(err)\n    }\n    if (res) {\n      console.log('success!')\n      console.log(res.data)\n      await this.props.toggleLogIn(true)\n      route('/game')\n    }\n  }\n\n  handleChange = (field: 'username' | 'password') => {\n    return (event: Event) => {\n      const formFields = clone(this.state.formFields)\n      formFields[field] = (event.target as HTMLInputElement).value\n      this.setState({formFields})\n    }\n  }\n}\n"],"sourceRoot":""}